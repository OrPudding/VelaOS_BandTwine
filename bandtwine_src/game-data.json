{
  "metadata": {
    "title": "Degrees of Lewdity",
    "description": "Degrees of Lewdity移植版",
    "author": "OrPudding",
    "version": "0.0.1",
    "versionCode": 1,
    "releaseDate": "2025-08-30",
    "license": "none",
    "copyright": "Copyright © 2025 OrPudding.",
    "indexNode": "start"
  },
    "variables": {
      "calc1": "",
      "calc2": "",
      "calc3": "",
      "world": {
        "time": 480,
        "day": 1,
        "formattedTime": "08:00",
        "timePeriod": "早晨"
      },
      "system": {
        "debug": {
          "value": true
        },
        "version": {
          "value": "0.5.0"
        }
      },
      "show": {
        "counter": {
          "value": 0,
          "desc": "计数器"
        },
        "flag": {
          "value": false,
          "desc": "状态标志"
        },
        "watcher": {
          "value": "未添加",
          "desc": "监听器状态"
        },
        "script": {
          "value": "未执行",
          "desc": "脚本输出"
        },
        "score": {
          "value": 100,
          "desc": "分数"
        },
        "formattedTime": {
          "value": "08:00",
          "desc": "当前时间"
        },
        "currentDay": {
          "value": 1,
          "desc": "当前天数"
        },
        "timePeriod": {
          "value": "早晨",
          "desc": "时间段"
        },
        "toastCount": {
          "value": 0,
          "desc": "Toast计数"
        },
        "jumpTarget": {
          "value": "无",
          "desc": "最近跳转目标"
        }
      },
      "player": {
        "name": {
          "value": "测试用户"
        },
        "level": {
          "value": 1
        }
      },
      "test": {
        "expr1": "",
        "expr2": "",
        "expr3": "",
        "expr4": "",
        "expr5": ""
      }
    },
    "nodes": {
      "start": {
        "text": "引擎核心特性测试\nv0.3.0-beta\n测试项目：\n{0}\n{1}\n{2}\n{3}\n{4}\n{5}\n{6}\n{7}\n{8}\n{9}\n{10}\n{11}\n{12}\n{13}",
        "links": [
          {
            "text": "基础功能测试",
            "target": "test_basic"
          },
          {
            "text": "变量操作测试",
            "target": "test_variables"
          },
          {
            "text": "条件逻辑测试",
            "target": "test_conditions"
          },
          {
            "text": "随机系统测试",
            "target": "test_random"
          },
          {
            "text": "图片系统测试",
            "target": "test_images"
          },
          {
            "text": "存档系统测试",
            "target": "test_save"
          },
          {
            "text": "表达式测试",
            "target": "test_expressions"
          },
          {
            "text": "振动功能测试",
            "target": "test_vibrate"
          },
          {
            "text": "监听器测试",
            "target": "test_watcher"
          },
          {
            "text": "自动存档测试",
            "target": "test_autosave"
          },
          {
            "text": "时间系统测试",
            "target": "test_time"
          },
          {
            "text": "时间监听器测试",
            "target": "test_time_listeners"
          },
          {
            "text": "Toast消息测试",
            "target": "test_toast"
          },
          {
            "text": "Jump跳转测试",
            "target": "test_jump"
          }
        ]
      },
      "test_basic": {
        "text": "基础功能测试\n\n特殊符号：&lt;&gt;@#\n变量显示：{var.show.counter.value}\n\n长文本测试：这是一段用于测试文本显示能力的长文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容文本内容{0}",
        "links": [
          {
            "text": "返回主节点",
            "target": "start"
          }
        ]
      },
      "test_variables": {
        "text": "变量操作测试\n当前计数器：{var.show.counter.value}\n当前分数：{var.show.score.value}\n当前状态：{var.show.flag.value}\n操作选项：\n{0}\n{1}\n{2}\n{3}\n{4}\n{5}\n{6}",
        "links": [
          {
            "text": "计数器+1",
            "target": "test_variables",
            "actions": [
              {
                "type": "add",
                "target": "var.show.counter.value",
                "value": 1
              }
            ]
          },
          {
            "text": "计数器-1",
            "target": "test_variables",
            "actions": [
              {
                "type": "add",
                "target": "var.show.counter.value",
                "value": -1
              }
            ]
          },
          {
            "text": "分数+10",
            "target": "test_variables",
            "actions": [
              {
                "type": "add",
                "target": "var.show.score.value",
                "value": 10
              }
            ]
          },
          {
            "text": "分数-10",
            "target": "test_variables",
            "actions": [
              {
                "type": "add",
                "target": "var.show.score.value",
                "value": -10
              }
            ]
          },
          {
            "text": "切换状态",
            "target": "test_variables",
            "actions": [
              {
                "type": "toggle",
                "target": "var.show.flag.value"
              }
            ]
          },
          {
            "text": "重置数据",
            "target": "test_variables",
            "actions": [
              {
                "type": "set",
                "target": "var.show.counter.value",
                "value": 0
              },
              {
                "type": "set",
                "target": "var.show.flag.value",
                "value": false
              }
            ]
          },
          {
            "text": "返回主节点",
            "target": "start"
          }
        ]
      },
      "test_conditions": {
        "text": "条件逻辑测试\n计数器：{var.show.counter.value}\n状态：{var.show.flag.value}\n基础条件：\n{cond.basic}\n复杂条件：\n{cond.complex}\n嵌套条件：\n{cond.nested}\n{0}\n{1}\n{2}\n{3}",
        "links": [
          {
            "text": "增加计数器",
            "target": "test_conditions",
            "actions": [
              {
                "type": "add",
                "target": "var.show.counter.value",
                "value": 1
              }
            ]
          },
          {
            "text": "减少计数器",
            "target": "test_conditions",
            "actions": [
              {
                "type": "add",
                "target": "var.show.counter.value",
                "value": -1
              }
            ]
          },
          {
            "text": "切换状态",
            "target": "test_conditions",
            "actions": [
              {
                "type": "toggle",
                "target": "var.show.flag.value"
              }
            ]
          },
          {
            "text": "返回主节点",
            "target": "start"
          }
        ],
        "conds": {
          "basic": [
            {
              "condition": "var.show.counter.value > 5",
              "text": "计数器>5"
            },
            {
              "text": "此时计数器≤5"
            }
          ],
          "complex": [
            {
              "condition": "var.show.counter.value > 10 && var.show.flag.value",
              "text": "此时计数器>10且状态为真"
            },
            {
              "condition": "var.show.counter.value < 5 || !var.show.flag.value",
              "text": "此时计数器<5或状态为假"
            },
            {
              "text": "其他情况"
            }
          ],
          "nested": [
            {
              "condition": "var.show.counter.value > 15",
              "text": "此时计数器大于15"
            },
            {
              "condition": "var.show.counter.value > 10",
              "text": "此时计数器大于10"
            },
            {
              "condition": "var.show.counter.value > 5",
              "text": "此时计数器大于5"
            },
            {
              "text": "此时计数器小于等于5"
            }
          ]
        }
      },
      "test_random": {
        "text": "随机测试\n基础随机：{random.basic}\n权重随机：{random.weighted}\n条件随机：\n{random.conditional}\n(增加计数器到5试试？)\n{0}\n{1}\n计数器：{var.show.counter.value}\n{2}\n{3}",
        "links": [
          {
            "text": "重新生成",
            "target": "test_random"
          },
          {
            "text": "返回主节点",
            "target": "start"
          },
          {
            "text": "增加计数器",
            "target": "test_random",
            "actions": [
              {
                "type": "add",
                "target": "var.show.counter.value",
                "value": 1
              }
            ]
          },
          {
            "text": "减少计数器",
            "target": "test_random",
            "actions": [
              {
                "type": "add",
                "target": "var.show.counter.value",
                "value": -1
              }
            ]
          }
        ],
        "randoms": {
          "basic": [
            {
              "text": "选项A"
            },
            {
              "text": "选项B"
            },
            {
              "text": "选项C"
            }
          ],
          "weighted": [
            {
              "text": "选项1(60%概率出现)",
              "weight": 0.6
            },
            {
              "text": "选项2(30%概率出现)",
              "weight": 0.3
            },
            {
              "text": "选项3(10%概率出现)",
              "weight": 0.1
            }
          ],
          "conditional": [
            {
              "text": "计数器>5时才可能出现",
              "condition": "var.show.counter.value > 5"
            },
            {
              "text": "一般情况"
            }
          ]
        }
      },
      "test_images": {
        "text": "图片测试\n这是一个宽度为120px的图片{img.120px}这是一个多层路径的图片{img.120px.alt}这是一个动态路径的图片{img.dynamic}\n{0}",
        "links": [
          {
            "text": "返回主节点",
            "target": "start"
          }
        ],
        "imgs": {
          "120px": {
            "path": "120px.png",
            "width": 120
          },
          "120px.alt": {
            "path": "test/120px.png",
            "width": 120
          },
          "dynamic": {
            "path": "${var.player.level.value + '.png'}",
            "width": 120
          }
        }
      },
      "test_save": {
        "text": "存档测试\n当前计数器：{var.show.counter.value}\n当前状态：{var.show.flag.value}\n{0}\n{1}",
        "links": [
          {
            "text": "修改测试数据",
            "target": "test_save_modify"
          },
          {
            "text": "返回主节点",
            "target": "start"
          }
        ]
      },
      "test_save_modify": {
        "text": "修改测试数据\n当前计数器：{var.show.counter.value}\n当前状态：{var.show.flag.value}\n{0}\n{1}\n{2}",
        "links": [
          {
            "text": "计数器+5",
            "target": "test_save_modify",
            "actions": [
              {
                "type": "add",
                "target": "var.show.counter.value",
                "value": 5
              }
            ]
          },
          {
            "text": "切换状态",
            "target": "test_save_modify",
            "actions": [
              {
                "type": "toggle",
                "target": "var.show.flag.value"
              }
            ]
          },
          {
            "text": "返回上级",
            "target": "test_save"
          }
        ]
      },
      "test_expressions": {
        "text": "表达式测试\n\n【简单表达式】\n10+20*3 = {var.test.expr1}\n\n【变量表达式】\nvar.show.counter.value*2+5 = {var.test.expr2}\n\n【条件表达式】\nvar.show.counter.value > 5 ? '大于5' : '小于等于5' = {var.test.expr3}\n\n【嵌套表达式】\n(10 + var.show.counter.value) * (var.show.flag.value ? 2 : 1) = {var.test.expr4}\n\n【复杂嵌套表达式】\nvar.show.counter.value > 10 ? \n  (var.show.flag.value ? 'A' : 'B') : \n  (var.show.counter.value > 5 ? 'C' : 'D') = {var.test.expr5}\n\n{0}\n{1}",
        "actions": [
          {
            "type": "set",
            "target": "var.test.expr1",
            "value": "$(10 + 20 * 3)"
          },
          {
            "type": "set",
            "target": "var.test.expr2",
            "value": "$(var.show.counter.value * 2 + 5)"
          },
          {
            "type": "set",
            "target": "var.test.expr3",
            "value": "$(var.show.counter.value > 5 ? '大于5' : '小于等于5')"
          },
          {
            "type": "set",
            "target": "var.test.expr4",
            "value": "$((10 + var.show.counter.value) * (var.show.flag.value ? 2 : 1))"
          },
          {
            "type": "set",
            "target": "var.test.expr5",
            "value": "$(var.show.counter.value > 10 ? (var.show.flag.value ? 'A' : 'B') : (var.show.counter.value > 5 ? 'C' : 'D'))"
          }
        ],
        "links": [
          {
            "text": "更新表达式",
            "target": "test_expressions"
          },
          {
            "text": "返回主节点",
            "target": "start"
          }
        ]
      },
      "test_vibrate": {
        "text": "振动功能测试\n选择振动类型：\n{0}\n{1}\n{2}",
        "links": [
          {
            "text": "短振动(100ms)",
            "target": "test_vibrate",
            "actions": [
              {
                "type": "vibrate",
                "mode": "short"
              }
            ]
          },
          {
            "text": "长振动(500ms)",
            "target": "test_vibrate",
            "actions": [
              {
                "type": "vibrate",
                "mode": "long"
              }
            ]
          },
          {
            "text": "返回主节点",
            "target": "start"
          }
        ]
      },
        "test_watcher": {
          "text": "监听器测试\n当前计数器：{var.show.counter.value}\n监听器状态：{var.show.watcher.value}\n操作选项：\n{0}\n{1}\n{2}\n{3}",
          "links": [
            {
              "text": "创建监听器(当计数器>3时触发)",
              "target": "test_watcher",
              "actions": [
                {
                  "type": "addListener",
                  "id": "test_watcher_1",
                  "condition": "var.show.counter.value > 3",
                  "actions": [
                    {
                      "type": "set",
                      "target": "var.show.watcher.value",
                      "value": "已触发"
                    },
                    {
                      "type": "vibrate",
                      "mode": "long"
                    }
                  ],
                  "options": {
                    "nodeId": "start"
                  }
                },
                {
                  "type": "set",
                  "target": "var.show.watcher.value",
                  "value": "已添加"
                }
              ]
            },
            {
              "text": "移除所有监听器",
              "target": "test_watcher",
              "actions": [
                {
                  "type": "removeListener",
                  "id": "all"
                },
                {
                  "type": "set",
                  "target": "var.show.watcher.value",
                  "value": "已移除"
                }
              ]
            },
            {
              "text": "增加计数器",
              "target": "test_watcher",
              "actions": [
                {
                  "type": "add",
                  "target": "var.show.counter.value",
                  "value": 1
                }
              ]
            },
            {
              "text": "返回主节点",
              "target": "start"
            }
          ]
        },
        "test_autosave": {
          "text": "自动存档测试\n当前计数器：{var.show.counter.value}\n操作选项：\n{0}\n{1}\n{2}",
          "links": [
            {
              "text": "执行自动存档",
              "target": "test_autosave",
              "actions": [
                {
                  "type": "autosave"
                }
              ]
            },
            {
              "text": "修改计数器(触发条件)",
              "target": "test_autosave_modify"
            },
            {
              "text": "返回主节点",
              "target": "start"
            }
          ]
        },
        "test_autosave_modify": {
          "text": "修改测试数据\n当前计数器：{var.show.counter.value}\n{0}\n{1}\n{2}",
          "links": [
            {
              "text": "计数器+1",
              "target": "test_autosave_modify",
              "actions": [
                {
                  "type": "add",
                  "target": "var.show.counter.value",
                  "value": 1
                }
              ]
            },
            {
              "text": "计数器-1",
              "target": "test_autosave_modify",
              "actions": [
                {
                  "type": "add",
                  "target": "var.show.counter.value",
                  "value": -1
                }
              ]
            },
            {
              "text": "返回上级",
              "target": "test_autosave"
            }
          ]
        },
        "test_time": {
          "text": "时间系统测试\n当前时间：{var.world.formattedTime}\n当前天数：{var.world.day}\n操作选项：\n{0}\n{1}\n{2}\n{3}",
          "links": [
            {
              "text": "推进15分钟",
              "target": "test_time",
              "actions": [
                {
                  "type": "advanceTime",
                  "minutes": 15
                }
              ]
            },
            {
              "text": "推进75分钟",
              "target": "test_time",
              "actions": [
                {
                  "type": "advanceTime",
                  "minutes": 75
                }
              ]
            },
            {
              "text": "推进300分钟(测试跨天)",
              "target": "test_time",
              "actions": [
                {
                  "type": "advanceTime",
                  "minutes": 300
                }
              ]
            },
            {
              "text": "返回主节点",
              "target": "start"
            }
          ]
        },
        "test_time_listeners": {
          "text": "时间监听器测试\n当前时间：{var.world.formattedTime}\n监听器状态：{var.show.watcher.value}\n操作选项：\n{0}\n{1}\n{2}\n{3}\n{4}",
          "links": [
            {
              "text": "添加整点监听器",
              "target": "test_time_listeners",
              "actions": [
                {
                  "type": "addListener",
                  "id": "hourly",
                  "condition": "hourChanged",
                  "actions": [
                    {
                      "type": "toast",
                      "message": "整点时间已触发"
                    }
                  ],
                  "options": {
                    "once": false
                  }
                },
                {
                  "type": "set",
                  "target": "var.show.watcher.value",
                  "value": "整点监听已添加"
                }
              ]
            },
            {
              "text": "添加跨天监听器",
              "target": "test_time_listeners",
              "actions": [
                {
                  "type": "addListener",
                  "id": "new_day",
                  "condition": "dayChanged",
                  "actions": [
                    {
                      "type": "toast",
                      "message": "新的一天开始了!"
                    }
                  ],
                  "options": {
                    "once": false
                  }
                },
                {
                  "type": "set",
                  "target": "var.show.watcher.value",
                  "value": "跨天监听已添加"
                }
              ]
            },
            {
              "text": "推进时间(测试整点)",
              "target": "test_time_listeners",
              "actions": [
                {
                  "type": "advanceTime",
                  "minutes": 59
                }
              ]
            },
            {
              "text": "推进时间(测试跨天)",
              "target": "test_time_listeners",
              "actions": [
                {
                  "type": "advanceTime",
                  "minutes": 1440
                }
              ]
            },
            {
              "text": "返回主节点",
              "target": "start"
            }
          ]
        },
        "test_time_custom": {
          "text": "自定义时间监听测试\n当前时间：{var.world.formattedTime}\n监听器状态：{var.show.watcher.value}\n操作选项：\n{0}\n{1}\n{2}",
          "links": [
            {
              "text": "添加早晨8点监听",
              "target": "test_time_custom",
              "actions": [
                {
                  "type": "addListener",
                  "id": "morning_8am",
                  "condition": "hourChanged && var.world.time == 480",
                  "actions": [
                    {
                      "type": "toast",
                      "message": "早上8点，该吃早餐了"
                    }
                  ],
                  "options": {
                    "once": false
                  }
                },
                {
                  "type": "set",
                  "target": "var.show.watcher.value",
                  "value": "早晨8点监听已添加"
                }
              ]
            },
            {
              "text": "推进到7:55(测试)",
              "target": "test_time_custom",
              "actions": [
                {
                  "type": "advanceTime",
                  "minutes": 475
                }
              ]
            },
            {
              "text": "再推进10分钟(触发)",
              "target": "test_time_custom",
              "actions": [
                {
                  "type": "advanceTime",
                  "minutes": 10
                }
              ]
            }
          ]
        },
  
      "test_toast": {
        "text": "Toast消息测试\nToast计数：{var.show.toastCount.value}\n操作选项：\n{0}\n{1}\n{2}\n{3}",
        "links": [
          {
            "text": "显示简单Toast",
            "target": "test_toast",
            "actions": [
              {
                "type": "toast",
                "message": "这是一个测试Toast"
              },
              {
                "type": "add",
                "target": "var.show.toastCount.value",
                "value": 1
              }
            ]
          },
          {
            "text": "显示带变量的Toast",
            "target": "test_toast",
            "actions": [
              {
                "type": "toast",
                "message": "当前时间: {var.world.formattedTime}, 计数器: {var.show.counter.value}"
              },
              {
                "type": "add",
                "target": "var.show.toastCount.value",
                "value": 1
              }
            ]
          },
          {
            "text": "显示长持续时间Toast",
            "target": "test_toast",
            "actions": [
              {
                "type": "toast",
                "message": "5秒Toast",
                "duration": 5000
              },
              {
                "type": "add",
                "target": "var.show.toastCount.value",
                "value": 1
              }
            ]
          },
          {
            "text": "返回主节点",
            "target": "start"
          }
        ]
      },
      "test_jump": {
        "text": "Jump跳转测试\n最近跳转目标：{var.show.jumpTarget.value}\n操作选项：\n{0}\n{1}\n{2}\n{3}\n{4}",
        "links": [
          {
            "text": "无条件跳转到start",
            "target": "test_jump",
            "actions": [
              {
                "type": "jump",
                "target": "start"
              },
              {
                "type": "set",
                "target": "var.show.jumpTarget.value",
                "value": "start"
              }
            ]
          },
          {
            "text": "条件跳转(计数器>3)",
            "target": "test_jump",
            "actions": [
              {
                "type": "jump",
                "target": "test_conditions",
                "condition": "var.show.counter.value > 3",
                "beforeActions": [
                  {
                    "type": "toast",
                    "message": "即将跳转到条件测试"
                  }
                ],
                "afterActions": [
                  {
                    "type": "set",
                    "target": "var.show.jumpTarget.value",
                    "value": "test_conditions"
                  }
                ]
              }
            ]
          },
          {
            "text": "带前后操作的跳转",
            "target": "test_jump",
            "actions": [
              {
                "type": "jump",
                "target": "test_expressions",
                "beforeActions": [
                  {
                    "type": "set",
                    "target": "var.show.counter.value",
                    "value": 10
                  }
                ],
                "afterActions": [
                  {
                    "type": "toast",
                    "message": "已跳转到表达式测试"
                  },
                  {
                    "type": "set",
                    "target": "var.show.jumpTarget.value",
                    "value": "test_expressions"
                  }
                ]
              }
            ]
          },
          {
            "text": "增加计数器",
            "target": "test_jump",
            "actions": [
              {
                "type": "add",
                "target": "var.show.counter.value",
                "value": 1
              }
            ]
          },
          {
            "text": "返回主节点",
            "target": "start"
          }
        ]
      }
  }
}
  